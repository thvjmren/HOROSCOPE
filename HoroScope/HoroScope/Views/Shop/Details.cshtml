    @model ProductPageVM

@section links {
    <link rel="stylesheet" type="text/css" href="~/assets/css/style.css" />
    <link rel="stylesheet" type="text/css" href="~/assets/css/responsive.css" />
    }

<style>
    .rating-stars {
        display: flex;
        flex-direction: row-reverse;
        justify-content: start;
        gap: 5px;
    }

        .rating-stars input[type="radio"] {
            display: none;
        }

        .rating-stars label {
            font-size: 2rem;
            color: #ccc;
            cursor: pointer;
        }

            .rating-stars input[type="radio"]:checked ~ label,
            .rating-stars label:hover,
            .rating-stars label:hover ~ label {
                color: gold;
            }

            .rating-stars label::before {
                content: '\f005'; /* Unicode for fa-star */
                font-family: FontAwesome;
            }
</style>


<!-- hs About Title Start -->
<div class="hs_indx_title_main_wrapper">
    <div class="hs_title_img_overlay"></div>
    <div class="container">
        <div class="row">
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 full_width">
                <div class="hs_indx_title_left_wrapper">
                    <h2>@Model.ShopDetailsVM.Product.Name</h2>
                </div>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 full_width">
                <div class="hs_indx_title_right_wrapper">
                    <ul style="display: flex; flex-wrap: wrap; gap: 5px;">
                        <li><a asp-controller="Home" asp-action="Index">Home</a></li>
                        <li>&gt;</li>
                        <li><a asp-controller="Shop" asp-action="Index">Shop</a></li>
                        <li>&gt;</li>
                        <li>@Model.ShopDetailsVM.Product.Name</li>
                    </ul>
                </div>
            </div>

        </div>
    </div>
</div>
<!-- hs About Title End -->
<!-- hs shop single prod slider Start -->
<div class="hs_shop_single_prod_slider_wrapper">
    <div class="container">
        <div class="row">
            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                <div class="video_img_section_wrapper">
                    <div class="cc_ps_top_slider_section">
                        <div class="owl-carousel owl-theme">

                            @foreach (var image in Model.ShopDetailsVM.Product.ProductImages)
                            {
                                <div class="item" data-hash="zero">

                                    <img class="small img-responsive" src="~/assets/images/content/shop/@image.Image" alt="small_img" />

                                </div>
                            }

                        </div>
                        <div class="row">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <div class="video_nav_img">
                                    <div class="row">
                                        @foreach (var image in Model.ShopDetailsVM.Product.ProductImages)
                                        {
                                            <div class="item" data-hash="zero">

                                                <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 cc_ps_tabs">
                                                    <a class="button secondary url owl_nav" href="#zero"><img src="~/assets/images/content/shop/@image.Image" class="img-responsive" alt="nav_img"></a>
                                                </div>
                                            </div>
                                        }


                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                <div class="hs_shop_single_cart_wrapper">
                    <h2>@Model.ShopDetailsVM.Product.Name</h2>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star-o"></i>
                    <i class="fa fa-star-o"></i> &nbsp;&nbsp;
                    <span>5,331 Ratings & 1,151 Reviews</span>
                    @if (Model.ShopDetailsVM.Product.Discount > 0)
                    {
                        var discountedPrice = Model.ShopDetailsVM.Product.Price - (Model.ShopDetailsVM.Product.Price * Model.ShopDetailsVM.Product.Discount / 100);
                        <h3>
                            $@discountedPrice.ToString("0.##", System.Globalization.CultureInfo.InvariantCulture) &nbsp;
                            <del>$@Model.ShopDetailsVM.Product.Price.ToString("0.##", System.Globalization.CultureInfo.InvariantCulture)</del> &nbsp;
                            <span>(@Model.ShopDetailsVM.Product.Discount.ToString("F0")% off)</span>
                        </h3>
                    }
                    else
                    {
                        <h3>
                            $@Model.ShopDetailsVM.Product.Price.ToString("0.##", System.Globalization.CultureInfo.InvariantCulture)
                        </h3>
                    }
                </div>
                <div class="hs_shop_single_cart_icon_wrapper">
                    <div class="hs_shop_single_cart_icon_left">
                        <i class="fa fa-cart-arrow-down"></i>
                    </div>
                    <div class="hs_shop_single_cart_icon_cont_left">
                        <p>Ships in 4 - 5 Days ( FREE Shipping in India )</p>
                    </div>
                </div>
                <div class="hs_shop_single_cart_icon_wrapper">
                    <div class="hs_shop_single_cart_icon_left">
                        <i class="fa fa-money"></i>
                    </div>
                    <div class="hs_shop_single_cart_icon_cont_left">
                        <p>Check for COD availability</p>
                    </div>
                </div>
                <div class="hs_shop_single_co_wrapper">
                    <input type="text" placeholder="Enter Pin Code">
                    <button type="submit">CHECK OUT</button>
                    <p>30 Days Refund/Exchange</p>
                </div>
                <div class="row">
                    <div class="col-lg-4 col-md-5 col-sm-4 col-xs-12">
                        <div class="btc_shop_prod_quanty_bar">
                            <div class="cc_ps_quantily_info">
                                <div class="select_number">
                                    <button onclick="changeQty(1); return false;" class="increase">
                                        <i class="fa fa-plus"></i>
                                    </button>
                                    <input type="text" name="quantity" value="1" size="2" id="input-quantity" class="form-control" />
                                    <button onclick="changeQty(0); return false;" class="decrease">
                                        <i class="fa fa-minus"></i>
                                    </button>
                                </div>
                                <input type="hidden" name="product_id" />
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-8 col-md-7 col-sm-8 col-xs-12">
                        <div class="hs_shop_single_cart_btn">
                            <ul>
                                <li><a href="#">BUY NOW</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- hs shop single prod slider End -->
<!-- btc shop single tabs Wrapper Start -->
<div class="btc_shop_single_tabs_main_wrapper">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="btc_shop_single_tabs_wrapper">
                    <ul class="nav nav-pills">
                        <li class="active"><a data-toggle="pill" href="#home">Description</a></li>
                        <li><a data-toggle="pill" href="#menu1">Reviews</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="btc_shop_single_tabs_content_main_wrapper">
                    <div class="tab-content">
                        <div id="home" class="tab-pane fade in active">
                            <div class="btc_shop_single_tabs_img_wrapper">
                                <img src="~/assets/images/content/shop/@(Model.ShopDetailsVM.Product.ProductImages.FirstOrDefault(pi => pi.IsPrimary == true)?.Image)" alt="tab_img" class="img-responsive" />
                            </div>
                            <div class="btc_shop_single_tabs_img_content_wrapper">
                                <p>
                                    @Model.ShopDetailsVM.Product.Description
                                </p>
                            </div>
                            <div class="btc_shop_single_tabs_img_content_bottom_wrapper">
                                <ul>
                                    @foreach (var group in Model.ShopDetailsVM.Product.ProductFeatureValues
                                    .GroupBy(pfv => pfv.FeatureValue.Feature.Name))
                                    {
                                        <li>
                                            <i class="fa fa-long-arrow-right"></i>
                                            @group.Key : @string.Join(", ", group.Select(pfv => pfv.FeatureValue.Value))
                                        </li>
                                    }
                                </ul>
                            </div>
                        </div>
                        <div id="menu1" class="tab-pane fade">
                            <div class="container">
                                <div class="row justify-content-center">
                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                        <div class="hs_about_heading_main_wrapper">

                                            <form method="post" asp-action="Review">
                                                <div asp-validation-summary="ModelOnly" class="text-danger mb-3"></div>

                                                <div class="form-group">
                                                    <label asp-for="ProductReviewVM.Comment">Comment</label>
                                                    <input asp-for="ProductReviewVM.Comment" class="form-control" placeholder="Comment" />
                                                    <span asp-validation-for="ProductReviewVM.Comment" class="text-danger"></span>
                                                </div>

                                                <div class="rating-stars mb-3">
                                                    @for (int i = 5; i >= 1; i--)
                                                    {
                                                        <input type="radio" asp-for="ProductReviewVM.Rating" id="star-@i" value="@i" />
                                                        <label for="star-@i" title="@i star"></label>
                                                    }
                                                    <span asp-validation-for="ProductReviewVM.Rating" class="text-danger"></span>
                                                </div>

                                                <input type="hidden" asp-for="ProductReviewVM.ProductId" />

                                                <button type="submit" class="btn btn-outline-dark">Submit</button>
                                            </form>


                                        </div>
                                    </div>
                                </div>
                            </div>

@*                             <div class="col-lg-8 col-md-7 col-sm-8 col-xs-12">
                                <div class="hs_shop_single_cart_btn">
                                    <ul>
                                        <li><a asp-controller="Shop" asp-action="Review" asp-route-productId="@Model.ShopDetailsVM.Product.Id">Add Review</a></li>
                                    </ul>
                                </div>
                            </div> *@
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- btc shop single tabs Wrapper End -->
<!-- hs popular prodt wrapper Start -->
<div class="hs_shop_pp_main_wrapper">
    <div class="hs_shop_pp_img_overlay"></div>
    <div class="container">
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="hs_about_heading_main_wrapper">
                    <div class="hs_about_heading_wrapper">
                        <h2>Popular <span> Products</span></h2>
                        <h4><span></span></h4>
                        <p>Explore our collection of best-selling astrology products designed to guide and inspire your cosmic journey. From powerful talismans and birth chart guides to celestial-themed accessories, these popular items bring the stars closer to you. Unlock the mysteries of the universe and enhance your spiritual path with our trusted astrology favorites.</p>
                    </div>
                </div>
            </div>
            @foreach (var product in Model.ShopDetailsVM.PopularProducts)
            {
                <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12">
                    <div class="hs_shop_prodt_main_box">
                        <div class="hs_shop_prodt_img_wrapper">
                            <img src="~/assets/images/content/shop/@product.ProductImages?.FirstOrDefault(pi=>pi.IsPrimary==true)?.Image" alt="shop_product">
                            <a href="#">Add to Cart</a>
                        </div>
                        <div class="hs_shop_prodt_img_cont_wrapper">
                            <h2><a asp-controller="Shop" asp-action="Details" asp-route-id="@product.Id">@product.Name</a></h2>
                            @if (product.Discount > 0)
                            {
                                var discountedPrice = product.Price - (product.Price * product.Discount / 100);
                                <h3>
                                    $@discountedPrice.ToString("0.##", System.Globalization.CultureInfo.InvariantCulture) &nbsp;
                                    <del>$@product.Price.ToString("0.##", System.Globalization.CultureInfo.InvariantCulture)</del> &nbsp;
                                    <span>(@product.Discount.ToString("F0")% off)</span>
                                </h3>
                            }
                            else
                            {
                                <h3>
                                    $@product.Price.ToString("0.##", System.Globalization.CultureInfo.InvariantCulture)
                                </h3>
                            }
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                        </div>
                    </div>
                </div>
            }
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="hs_pp_bottom_btn_wrapper">
                    <div class="hs_pp_bottom_btn">
                        <ul>
                            <li><a href="#">View All</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- hs popular prodt wrapper End -->
